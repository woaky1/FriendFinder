<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Friend Finder Survey</title>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Survey Questions</h1>
                <hr>
                <form>
                    <h2>About You</h2>
                    <div class="form-group">
                        <label for="name">Name &#40;Required&#41;</label>
                        <input type="text" class="form-control name" id="name" aria-describedby="emailHelp" name = "name">
                    </div>
                    <div class="form-group">
                        <label for="photo">Link to Photo Image &#40;Required&#41;</label>
                        <input type="text" class="form-control" id="photo" name = "photo">
                    </div>
                    <hr>
                    
                    <div class="form-group">
                        <label for="q1"><h2>Question 1</h2><h5>The color green is very pretty.</h5></label>
                        <select id="q1" class="form-control col-md-4" name = "q1">
                            <option disabled selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q2"><h2>Question 2</h2><h5>I'm a cat person.</h5></label>
                        <select id="q2" class="form-control col-md-4" name = "q2">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q3"><h2>Question 3</h2><h5>I love pineapple on pizza.</h5></label>
                        <select id="q3" class="form-control col-md-4" name = "q3">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q4"><h2>Question 4</h2><h5>A hot dog is a sandwich.</h5></label>
                        <select id="q4" class="form-control col-md-4" name = "q4">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q5"><h2>Question 5</h2><h5>I love football!</h5></label>
                        <select id="q5" class="form-control col-md-4" name = "q5">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q6"><h2>Question 6</h2><h5>You could say I'm outdoorsie.</h5></label>
                        <select id="q6" class="form-control col-md-4" name = "q6">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q7"><h2>Question 7</h2><h5>I'm a night owl.</h5></label>
                        <select id="q7" class="form-control col-md-4" name = "q7">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q8"><h2>Question 8</h2><h5>I know my way around a d20.</h5></label>
                        <select id="q8" class="form-control col-md-4" name = "q8">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q9"><h2>Question 9</h2><h5>I'd rather be hot than cold.</h5></label>
                        <select id="q9" class="form-control col-md-4" name = "q9">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="q10"><h2>Question 10</h2><h5>I love to travel.</h5></label>
                        <select id="q10" class="form-control col-md-4" name = "q10">
                            <option selected>Choose a number.</option>
                            <option value = "1">1 &#40;Strongly Disagree&#41;</option>
                            <option value = "2">2</option>
                            <option value = "3">3</option>
                            <option value = "4">4</option>
                            <option value = "5">5 &#40;Strongly Agree&#41;</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" id = "submitButton" data-toggle="modal" data-target="#exampleModal">Submit</button>
                    <hr>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <a href="/api/friends">API Friends List</a> | <a href="https://github.com/woaky1/FriendFinder">GitHub Repo</a>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Best Match</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
        $("#submitButton").on("click", function (event) {
            event.preventDefault();
            var name = $("#name").val().trim();
            var photo = $("#photo").val().trim();
            var q1 = $("#q1").val();
            var q2 = $("#q2").val();
            var q3 = $("#q3").val();
            var q4 = $("#q4").val();
            var q5 = $("#q5").val();
            var q6 = $("#q6").val();
            var q6 = $("#q6").val();
            var q7 = $("#q7").val();
            var q8 = $("#q8").val();
            var q9 = $("#q9").val();
            var q10 = $("#q10").val();
            var queryURL = `/api/friends/${name}/${photo}/${q1}/${q2}/${q3}/${q4}/${q5}/${q6}/${q7}/${q8}/${q9}/${q10}`;
            console.log(queryURL);
            $.ajax({
                url: queryURL,
                method: "POST"
            }).then(function(response) {
                $(".modal-body").append(`<p>${response.name}</p><img id="friendPhoto" src="${response.photo}">`)
                // Learned this trick for handling broken images here: https://css-tricks.com/snippets/jquery/better-broken-image-handling/
                $("img").on("error", function() {
                    $("#friendPhoto").hide();
                });
            })
        })
    </script>
</body>
</html>